CYREN_INSTALL_HEADERS(md5.h PREFIX openssl)
CYREN_INSTALL_HEADERS(md5_locl.h INTERNAL)

OPENSSL_ADD_CRYPTO_SOURCES(
    md5_dgst.c
    md5_one.c
    PARENT_SCOPE)

IF(CYREN_ARCH_IS_AMD64)
    OPENSSL_ADD_CRYPTO_SOURCES(
        asm/md5-x86_64.pl
        PARENT_SCOPE PERLASM)

ELSEIF(CYREN_ARCH_IS_I386)
    OPENSSL_ADD_CRYPTO_SOURCES(
        asm/md5-586.pl
        PARENT_SCOPE PERLASM)
ENDIF()

OPENSSL_ADD_CRYPTO_DEFINITIONS(
    -DMD5_ASM
    PARENT_SCOPE)

OPENSSL_ADD_CRYPTO_TESTS(
    md5test.c
    PARENT_SCOPE)
