CYREN_INSTALL_HEADERS(rc4.h PREFIX openssl)
CYREN_INSTALL_HEADERS(rc4_locl.h INTERNAL)

OPENSSL_ADD_CRYPTO_SOURCES(
    rc4_utl.c
    PARENT_SCOPE)

IF(CYREN_ARCH_IS_AMD64)
    OPENSSL_ADD_CRYPTO_SOURCES(
        asm/rc4-md5-x86_64.pl
        asm/rc4-x86_64.pl
        PARENT_SCOPE PERLASM)

ELSEIF(CYREN_ARCH_IS_I386)
    OPENSSL_ADD_CRYPTO_SOURCES(
        asm/rc4-586.pl
        PARENT_SCOPE PERLASM)

ELSEIF(CYREN_ARCH_IS_PPC OR CYREN_ARCH_IS_PPC64)
    OPENSSL_ADD_CRYPTO_SOURCES(
        rc4_enc.c
        rc4_skey.c
        PARENT_SCOPE)

ELSE()
    MESSAGE(FATAL_ERROR "Unknown architecture")
ENDIF()

OPENSSL_ADD_CRYPTO_DEFINITIONS(
    -DRC4_ASM
    PARENT_SCOPE)

OPENSSL_ADD_CRYPTO_TESTS(
    rc4test.c
    PARENT_SCOPE)
